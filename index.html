<!DOCTYPE html>
<html lang="en" manifest="site.manifest2">
  
  <head>
    <meta charset="utf-8">
    <title>PassWord Wallet
    </title>
    <meta name="description" content="">
    <meta name="author" content="Mathieu Dutour">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Le styles -->
	<link rel="stylesheet" href="assets/css/uikit.almost-flat.css">
	<link rel="stylesheet" href="assets/css/form-password.almost-flat.css">
    <link rel="shortcut icon" href="assets/ios/favicon.ico">
    <link rel="apple-touch-icon" href="assets/ios/icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="assets/ios/icon-72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="assets/ios/icon@2x.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="assets/ios/icon-72@2x.png" />
    <link href="assets/ios/startup-320x460.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
    <link href="assets/ios/startup.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
  </head>
  <body>
	<nav class="uk-navbar" role="navigation">
	    <a class="uk-navbar-brand" href="#">PassWord Wallet</a>
	</nav>
	<div class="uk-width-9-10 uk-container-center">
		<br />
		<div id="message"></div>
		<div id="connexion">
			<form name="Form" id="Form" class="uk-form uk-form-stacked">
				<fieldset>
					<legend id ="title">Connexion</legend>
					<div class="uk-form-row">
						<div class="uk-form-password uk-width-1-1">
							<input class="uk-form-large uk-width-1-1" id="pass" name="pass" type="password" placeholder="Password" autofocus="autofocus"/>
							<a href="" class="uk-form-password-toggle" data-uk-form-password>Show</a>
						</div>
						<input id="passhide" name="passhide" type="hidden" value="false"/>
					</div>
					<div class="uk-form-row">
						<input type="submit" id="submit" name="submit" value="Connexion" class="uk-button uk-button-primary uk-button-expand uk-button-large" />
					</div>
				</fieldset>
			</form>
		</div>
	</div>
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/form-password.js"></script>
	<script src="assets/js/password.js"></script>
    <script type="text/javascript">    	
	    document.addEventListener('DOMContentLoaded', function() {
			document.getElementById('Form').addEventListener('submit', function(e) {
				e.preventDefault();
				console.log('click');
				var password = document.getElementById("pass").value,
					salt = document.getElementById("passhide").value;
				
				if(password && password.length!==0 && salt && salt === "false") {
					document.getElementById("message").innerHTML = "<div class='uk-alert' data-uk-alert><button type='button' class='uk-alert-close uk-close' aria-hidden=\"true\">&times;</button><strong>Success !</strong> You are now connected.</div>";
					document.getElementById("passhide").setAttribute("value",password);
					document.getElementById("pass").setAttribute("placeholder","Website's ID");
					document.getElementById("pass").value = '';
					document.getElementById("submit").setAttribute("value","Get the password");
					document.getElementById("title").innerHTML = "Get the password";
				}
				else if(password && password.length!==0 && salt && salt !== "false")
				{
					document.getElementById("message").innerHTML = "<div class='uk-alert' data-uk-alert>"+generate_password(password,salt)+"</div>";	
		          	selectText("message");
				}
				else
				{	
					document.getElementById("message").innerHTML = "<div class='uk-alert uk-alert-danger' data-uk-alert><button type=\"button\" class='uk-alert-close uk-close' aria-hidden=\"true\">&times;</button><strong>Something went wrong !</strong> Please try again.</div>";
					document.getElementById('control-group').className='control-group error';
		          				
				}
				
				return false;
			});						
		});
	</script>
      </body>
</html>
